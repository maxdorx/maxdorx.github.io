<div class="badges-grid">
  {% assign badges = site.data.credly.data | default: [] %}
  {% if badges.size == 0 %}<p>No badges yet.</p>{% endif %}

  {% for b in badges %}
    {% assign title = b.badge_template.name %}
    {% assign issuer = b.badge_template.issuer.name | default: "" %}
    {% assign img = b.badge_template.image_url | default: "" %}
    {% assign issued = b.issued_at | default: b.created_at %}
    {% assign expires = b.expires_at | default: b.expired_at %}
    {% assign url = b.badge_url | default: "" %}
    {% assign desc = b.badge_template.description | default: "" %}
    {% assign skills = b.badge_template.skills | default: b.skills | default: [] %}

    <article class="badge-card">
      <div class="badge-media">
        {% if img != "" %}
          <img src="{{ img }}" alt="{{ title }}" loading="lazy" decoding="async"
               width="80" height="80" style="width:80px;height:80px;object-fit:contain;border-radius:10px">
        {% endif %}
      </div>

      <div class="badge-body">
        <h3 class="badge-title">{{ title }}</h3>
        {% if issuer != "" %}<p class="badge-issuer">{{ issuer }}</p>{% endif %}
        <p class="badge-dates">
          {% if issued %}Issued {{ issued | date: "%b %d, %Y" }}{% endif %}
          {% if expires %} Â· Expires {{ expires | date: "%b %d, %Y" }}{% endif %}
        </p>
        {% if desc != "" %}<p class="badge-desc">{{ desc }}</p>{% endif %}
        {% if skills and skills.size > 0 %}
          <ul class="badge-skills">
            {% for s in skills limit:12 %}<li>{{ s.name | default: s }}</li>{% endfor %}
          </ul>
        {% endif %}
        {% if url != "" %}<p><a class="badge-link" href="{{ url }}" target="_blank" rel="noopener">View badge</a></p>{% endif %}
      </div>
    </article>
  {% endfor %}
</div>

<style>
/* light (default) */
.badge-card{background:#fff;border:1px solid #e5e7eb}
.badge-skills li,.badge-link{border-color:#e5e7eb}

/* dark selectors for Chirpy */
html[data-mode="dark"] .badge-card,
html[data-theme="dark"] .badge-card,
html.dark .badge-card{background:#111827;border-color:#374151}

html[data-mode="dark"] .badge-skills li,
html[data-theme="dark"] .badge-skills li,
html.dark .badge-skills li,
html[data-mode="dark"] .badge-link,
html[data-theme="dark"] .badge-link,
html.dark .badge-link{border-color:#374151}

/* keep OS auto-dark as fallback */
@media (prefers-color-scheme: dark){
  .badge-card{background:#111827;border-color:#374151}
  .badge-skills li,.badge-link{border-color:#374151}
}
</style>
